{% load static %}

<head>
  <title>{% block title %} Créez votre compte {% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- indispensable mobile -->
  <link href="{% static 'css/auth/signup.css' %}" rel="stylesheet"/>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>


{% block content %}
<section class="signup-section">
  <div class="container">
    <div class="row align-items-center justify-content-center">
      <!-- Formulaire à droite -->
      <div class="col-lg-6">
        <div class="card shadow-sm border-0 p-4" style="border-radius: 12px;">

          <!-- Logo cliquable au-dessus du formulaire -->
          <div class="text-center mb-4">
            <a href="{% url 'accueil' %}" title="Retour à l'accueil">
              <img src="{% static 'img/logo-navbar.png' %}" alt="Maison Elba" class="img-fluid login-logo" style="max-height: 80px;">
            </a>
            <small class="d-block mt-1 text-muted">Cliquez sur le logo pour revenir à l’accueil</small>
          </div>

          <!-- Titre et description -->
          <div class="mb-4 text-center">
            <h2 class="fw-bold mb-2" style="color: #7a5c4f; font-family: 'Playfair Display', serif;">
              Bienvenue chez Maison Elba
            </h2>
            <small class="text-muted">Commencez votre expérience en créant votre compte</small>
          </div>

          <!-- Formulaire -->
          <form method="POST" action="{% url 'signup' %}">
            {% csrf_token %}

            <!-- Prénom -->
            <div class="mb-3">
              <input type="text" id="prenom" name="prenom" placeholder="Prénom" class="form-control form-control-sm" required />
              {% for error in form.errors.prenom %}
                <div class="text-danger mt-1">{{ error }}</div>
              {% endfor %}
            </div>

            <!-- Nom -->
            <div class="mb-3">
              <input type="text" id="nom" name="nom" placeholder="Nom" class="form-control form-control-sm" required />
              {% for error in form.errors.nom %}
                <div class="text-danger mt-1">{{ error }}</div>
              {% endfor %}
            </div>

            <!-- Email -->
            <div class="mb-3">
              <input type="email" id="email" name="email" placeholder="Adresse email" class="form-control form-control-sm" required />
              {% for error in form.errors.email %}
                <div class="text-danger mt-1">{{ error }}</div>
              {% endfor %}
            </div>

            <!-- Téléphone -->
            <div class="mb-3">
              <input type="text" id="tel" name="tel" placeholder="Téléphone" class="form-control form-control-sm" required />
              {% for error in form.errors.tel %}
                <div class="text-danger mt-1">{{ error }}</div>
              {% endfor %}
            </div>

            <!-- Mot de passe -->
            <div class="mb-3 position-relative">
              <input type="password" id="formPassword" name="password1" placeholder="Mot de passe"
                     class="form-control form-control-sm pe-5" required
                     oninput="validatePassword()" onfocus="showRules()" onblur="hideRules()" />

              <span class="toggle-password" onclick="toggleVisibility('formPassword', this)" style="
                position: absolute;
                top: 50%;
                right: 15px;
                transform: translateY(-50%);
                cursor: pointer;
                color: #6c757d;">
                <i class="fa-solid fa-eye"></i>
              </span>

              {% for error in form.errors.password1 %}
                <div class="text-danger mt-1">{{ error }}</div>
              {% endfor %}

              <!-- Bloc des règles -->
              <div id="rules-box" class="bg-white border rounded shadow-sm p-3 position-absolute w-100" style="top: 100%; left: 0; display: none; z-index: 10;">
                <ul id="password-rules" class="list-unstyled mb-0">
                  <li id="rule-length" class="text-danger">
                    <span class="icon"><i class="bi bi-x-lg text-danger me-1"></i></span> Minimum 8 caractères
                  </li>
                  <li id="rule-lower" class="text-danger">
                    <span class="icon"><i class="bi bi-x-lg text-danger me-1"></i></span> Une minuscule
                  </li>
                  <li id="rule-upper" class="text-danger">
                    <span class="icon"><i class="bi bi-x-lg text-danger me-1"></i></span> Une majuscule
                  </li>
                  <li id="rule-digit" class="text-danger">
                    <span class="icon"><i class="bi bi-x-lg text-danger me-1"></i></span> Un chiffre
                  </li>
                  <li id="rule-special" class="text-danger">
                    <span class="icon"><i class="bi bi-x-lg text-danger me-1"></i></span> Un caractère spécial
                  </li>
                  <li id="rule-prenom" class="text-danger">
                    <span class="icon"><i class="bi bi-x-lg text-danger me-1"></i></span> Ne pas contenir le prénom
                  </li>
                  <li id="rule-nom" class="text-danger">
                    <span class="icon"><i class="bi bi-x-lg text-danger me-1"></i></span> Ne pas contenir le nom
                  </li>
                </ul>
              </div>
            </div>

            <!-- Confirmation mot de passe -->
            <div class="mb-3 position-relative">
              <input type="password" id="formPassword2" name="password2" placeholder="Confirmez le mot de passe" class="form-control form-control-sm pe-5" required />
              <span class="toggle-password" onclick="toggleVisibility('formPassword2', this)" style="
                position: absolute;
                top: 50%;
                right: 15px;
                transform: translateY(-50%);
                cursor: pointer;
                color: #6c757d;">
                <i class="fa-solid fa-eye"></i>
              </span>
              {% for error in form.errors.password2 %}
                <div class="text-danger mt-1">{{ error }}</div>
              {% endfor %}
            </div>

            <!-- Bouton -->
            <div class="d-grid mt-3 mb-3">
              <button type="submit" class="btn btn-primary btn-sm rounded-pill">S'inscrire</button>
            </div>

            <!-- Lien vers connexion -->
            <p class="text-center text-muted mb-0">
              Vous avez déjà un compte ?
              <a href="{% url 'login' %}" class="fw-bold text-body"><u>Connectez-vous ici</u></a>
            </p>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>


  <!-- --------------------- FOOTER --------------------- -->
<footer class="bg-dark text-light py-4 mt-5 border-top">
  <div class="container text-center">
    <h5 class="fw-bold mb-2" style="font-family: 'Playfair Display', serif;">Maison Elba</h5>
    <p class="mb-2 text-light">© Tous droits réservés</p>
    <div class="d-flex flex-column flex-md-row justify-content-center align-items-center gap-3">
      <a href="{% url 'contact' %}" class="text-light text-decoration-none">
        <i class="bi bi-envelope-fill me-1"></i> contact@maisonelba.fr
      </a>
      <a href="https://wa.me/33782807396" target="_blank" class="text-success text-decoration-none">
        <i class="bi bi-whatsapp me-1"></i> WhatsApp
      </a>
      <a href="{% url 'about' %}" class="text-light text-decoration-none">
        <i class="bi bi-info-circle-fill me-1"></i> À propos
      </a>
    </div>
  </div>
</footer>
{% endblock %}

  <script src="{% static 'js/auth-user/auth-user.js' %}"></script>
